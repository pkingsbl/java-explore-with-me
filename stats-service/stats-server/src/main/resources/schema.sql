DROP TABLE IF EXISTS hits, apps;

CREATE TABLE IF NOT EXISTS apps
(
    id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    app VARCHAR(150) NOT NULL,
    CONSTRAINT pk_apps PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS hits
(
    id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    app_id BIGINT REFERENCES apps (id) NOT NULL,
    uri varchar(512) NOT NULL,
    ip varchar(15),
    timestamp TIMESTAMP WITHOUT TIME ZONE,
    CONSTRAINT pk_hits PRIMARY KEY (id),
    CONSTRAINT fk_app_id FOREIGN KEY (app_id) REFERENCES apps (id) ON DELETE CASCADE ON UPDATE CASCADE
);